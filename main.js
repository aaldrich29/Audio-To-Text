/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => AudioToTextPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var AudioFileSelectionModal = class extends import_obsidian.Modal {
  constructor({ app, audioFiles, onSelect }) {
    super(app);
    this.audioFiles = audioFiles;
    this.onSelect = onSelect;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h2", { text: "Select audio files to transcribe" });
    const allCheckboxContainer = contentEl.createDiv("all-checkbox-container");
    const allCheckbox = allCheckboxContainer.createEl("input", { type: "checkbox" });
    allCheckbox.addEventListener("change", () => {
      const checkboxes = contentEl.querySelectorAll(".audio-checkbox");
      checkboxes.forEach((checkbox) => checkbox.checked = allCheckbox.checked);
    });
    allCheckboxContainer.createEl("span", { text: "All" });
    this.audioFiles.forEach((file) => {
      const fileContainer = contentEl.createDiv("file-container");
      const checkbox = fileContainer.createEl("input", { type: "checkbox", cls: "audio-checkbox" });
      fileContainer.createEl("span", { text: file });
    });
    const submitButton = contentEl.createEl("button", { text: "Transcribe" });
    submitButton.addEventListener("click", () => {
      const selectedFiles = [];
      const checkboxes = contentEl.querySelectorAll(".audio-checkbox");
      checkboxes.forEach((checkbox, index) => {
        if (checkbox.checked) {
          selectedFiles.push(this.audioFiles[index]);
        }
      });
      this.onSelect(selectedFiles);
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var AudioToTextSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("OpenAI API key").setDesc("Enter your OpenAI API key here.").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.apiKey || "").onChange(async (value) => {
      this.plugin.settings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Context menu: Transcribe to new note").setDesc("Transcribe audio to a new note instead of the current note when you right-click an audio file link and choose transcribe.").addToggle((toggle) => toggle.setValue(this.plugin.settings.transcribeToNewNote).onChange(async (value) => {
      this.plugin.settings.transcribeToNewNote = value;
      await this.plugin.saveSettings();
    }));
  }
};
var AudioToTextPlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new AudioToTextSettingTab(this.app, this));
    this.addCommand({
      id: "transcribe-audio-files",
      name: "Add transcription to new notes",
      checkCallback: (checking) => {
        if (checking) {
          return !!this.app.workspace.activeLeaf;
        }
        this.handleTranscribeAudioFiles();
      }
    });
    this.addCommand({
      id: "add-transcription-to-active-note",
      name: "Add transcription to active note",
      checkCallback: (checking) => {
        if (checking) {
          return !!this.app.workspace.activeLeaf;
        }
        this.handleAddTranscriptionToActiveNote();
      }
    });
    this.registerEvent(this.app.workspace.on("file-menu", (menu, file) => {
      if (this.isSupportedAudioFile(file.extension)) {
        menu.addItem((item) => {
          item.setTitle("Transcribe audio file").setIcon("microphone").onClick(() => {
            if (this.settings.transcribeToNewNote) {
              this.transcribeAudioFile(file);
            } else {
              this.addTranscriptionToActiveNoteFromFile(file);
            }
          });
        });
      }
    }));
  }
  async handleTranscribeAudioFiles() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian.Notice("No active file found!");
      return;
    }
    const fileContent = await this.app.vault.read(activeFile);
    const audioFileLinks = this.extractAudioFileLinks(fileContent);
    if (audioFileLinks.length === 0) {
      new import_obsidian.Notice("No audio links found in the note!");
      return;
    }
    if (audioFileLinks.length === 1) {
      this.transcribeSingleAudioFile(audioFileLinks[0]);
    } else {
      new AudioFileSelectionModal({ app: this.app, audioFiles: audioFileLinks, onSelect: (selectedFiles) => {
        selectedFiles.forEach((link) => {
          this.transcribeSingleAudioFile(link);
        });
      } }).open();
    }
  }
  async handleAddTranscriptionToActiveNote() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian.Notice("No active file found!");
      return;
    }
    const fileContent = await this.app.vault.read(activeFile);
    const audioFileLinks = this.extractAudioFileLinks(fileContent);
    if (audioFileLinks.length === 0) {
      new import_obsidian.Notice("No audio links found in the note!");
      return;
    }
    if (audioFileLinks.length === 1) {
      this.addSingleTranscriptionToActiveNote(audioFileLinks[0]);
    } else {
      new AudioFileSelectionModal({
        app: this.app,
        audioFiles: audioFileLinks,
        onSelect: async (selectedFiles) => {
          let updatedContent = fileContent;
          for (const link of selectedFiles) {
            const text = await this.transcribeSingleAudioFile(link, true);
            if (text) {
              updatedContent += `

### Transcription for ${link}
${text}`;
            }
          }
          await this.app.vault.modify(activeFile, updatedContent);
        }
      }).open();
    }
  }
  async transcribeSingleAudioFile(link, returnText = false) {
    try {
      let audioFile = this.app.vault.getAbstractFileByPath(link);
      if (!audioFile) {
        audioFile = await this.searchFileByName(link);
      }
      if (!audioFile) {
        new import_obsidian.Notice(`Audio file not found: ${link}`);
        return;
      }
      const audioBuffer = await this.app.vault.readBinary(audioFile);
      const text = await this.transcribeAudio(audioBuffer, audioFile.name);
      if (text) {
        if (returnText) {
          return text;
        } else {
          await this.createTranscriptionNoteWithUniqueName(text, audioFile.name);
          new import_obsidian.Notice(`Transcription complete for file: ${link}`);
        }
      } else {
        new import_obsidian.Notice(`Transcription failed for file: ${link}`);
      }
    } catch (error) {
      new import_obsidian.Notice(`An error occurred during transcription for file: ${link}`);
      console.error(`Error during transcription for file: ${link}`, error);
    }
  }
  async addSingleTranscriptionToActiveNote(link) {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian.Notice("No active file found!");
      return;
    }
    const fileContent = await this.app.vault.read(activeFile);
    const text = await this.transcribeSingleAudioFile(link, true);
    if (text) {
      const updatedContent = fileContent + `

### Transcription for ${link}
${text}`;
      await this.app.vault.modify(activeFile, updatedContent);
      new import_obsidian.Notice(`Transcription added to active note for file: ${link}`);
    }
  }
  async addTranscriptionToActiveNoteFromFile(audioFile) {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) {
      new import_obsidian.Notice("No active file found!");
      return;
    }
    const fileContent = await this.app.vault.read(activeFile);
    const text = await this.transcribeSingleAudioFile(audioFile.path, true);
    if (text) {
      const updatedContent = fileContent + `

### Transcription for ${audioFile.name}
${text}`;
      await this.app.vault.modify(activeFile, updatedContent);
      new import_obsidian.Notice(`Transcription added to active note for file: ${audioFile.name}`);
    }
  }
  async transcribeAudioFile(audioFile) {
    try {
      const audioBuffer = await this.app.vault.readBinary(audioFile);
      const text = await this.transcribeAudio(audioBuffer, audioFile.name);
      if (text) {
        await this.createTranscriptionNoteWithUniqueName(text, audioFile.name);
        new import_obsidian.Notice("Transcription complete!");
      } else {
        new import_obsidian.Notice("Transcription failed!");
      }
    } catch (error) {
      new import_obsidian.Notice("An error occurred during transcription.");
      console.error("Error during transcription:", error);
    }
  }
  extractAudioFileLinks(content) {
    const regex = /!\[\[([^\]]+\.(mp3|webm|wav|ogg|m4a))\]\]/g;
    const matches = [];
    let match;
    while ((match = regex.exec(content)) !== null) {
      matches.push(match[1]);
    }
    return matches;
  }
  async searchFileByName(fileName) {
    const files = this.app.vault.getFiles();
    return files.find((file) => file.path.endsWith(fileName));
  }
  isSupportedAudioFile(extension) {
    const supportedExtensions = ["mp3", "webm", "wav", "ogg", "m4a"];
    return supportedExtensions.includes(extension.toLowerCase());
  }
  async transcribeAudio(audioBuffer, fileName) {
    const apiKey = this.settings.apiKey;
    if (!apiKey) {
      new import_obsidian.Notice("OpenAI API key not set!");
      return "";
    }
    try {
      const formData = new FormData();
      formData.append("file", new Blob([audioBuffer]), fileName);
      formData.append("model", "whisper-1");
      const response = await fetch("https://api.openai.com/v1/audio/transcriptions", {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${apiKey}`
        },
        body: formData
      });
      if (!response.ok) {
        const errorText = await response.text();
        new import_obsidian.Notice("API request failed!");
        return "";
      }
      const result = await response.json();
      return result.text;
    } catch (error) {
      new import_obsidian.Notice("Failed to communicate with API.");
      console.error("Failed to communicate with API:", error);
      return "";
    }
  }
  async createTranscriptionNoteWithUniqueName(text, audioFileName) {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile)
      return;
    let fileName = `${audioFileName} Transcription`;
    let filePath = (0, import_obsidian.normalizePath)(`${activeFile.parent.path}/${fileName}.md`);
    while (await this.app.vault.adapter.exists(filePath)) {
      const timestamp = new Date().toISOString().replace(/[:.]/g, "-");
      fileName = `${audioFileName} Transcription ${timestamp}`;
      filePath = (0, import_obsidian.normalizePath)(`${activeFile.parent.path}/${fileName}.md`);
    }
    try {
      const content = `### Transcription for ${audioFileName}
${text}`;
      await this.app.vault.create(filePath, content);
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file) {
        await this.app.workspace.getLeaf().openFile(file);
      } else {
        console.error("Failed to open transcription note:", filePath);
      }
    } catch (error) {
      new import_obsidian.Notice("Failed to create transcription note.");
      console.error("Error creating transcription note:", error);
    }
  }
  async loadSettings() {
    this.settings = Object.assign({ apiKey: "", transcribeToNewNote: true }, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  onunload() {
    console.log("Unloading Audio to Text plugin");
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIG5vcm1hbGl6ZVBhdGgsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbnRlcmZhY2UgQXVkaW9Ub1RleHRTZXR0aW5ncyB7XG4gICAgYXBpS2V5OiBzdHJpbmc7XG4gICAgdHJhbnNjcmliZVRvTmV3Tm90ZTogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIEF1ZGlvRmlsZVNlbGVjdGlvbk1vZGFsUHJvcHMge1xuICAgIGFwcDogQXBwO1xuICAgIGF1ZGlvRmlsZXM6IHN0cmluZ1tdO1xuICAgIG9uU2VsZWN0OiAoc2VsZWN0ZWRGaWxlczogc3RyaW5nW10pID0+IHZvaWQ7XG59XG5cbmNsYXNzIEF1ZGlvRmlsZVNlbGVjdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgYXVkaW9GaWxlczogc3RyaW5nW107XG4gICAgcHJpdmF0ZSBvblNlbGVjdDogKHNlbGVjdGVkRmlsZXM6IHN0cmluZ1tdKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoeyBhcHAsIGF1ZGlvRmlsZXMsIG9uU2VsZWN0IH06IEF1ZGlvRmlsZVNlbGVjdGlvbk1vZGFsUHJvcHMpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5hdWRpb0ZpbGVzID0gYXVkaW9GaWxlcztcbiAgICAgICAgdGhpcy5vblNlbGVjdCA9IG9uU2VsZWN0O1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdTZWxlY3QgYXVkaW8gZmlsZXMgdG8gdHJhbnNjcmliZScgfSk7XG5cbiAgICAgICAgY29uc3QgYWxsQ2hlY2tib3hDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdhbGwtY2hlY2tib3gtY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IGFsbENoZWNrYm94ID0gYWxsQ2hlY2tib3hDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnIH0pO1xuICAgICAgICBhbGxDaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveGVzID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5hdWRpby1jaGVja2JveCcpIGFzIE5vZGVMaXN0T2Y8SFRNTElucHV0RWxlbWVudD47XG4gICAgICAgICAgICBjaGVja2JveGVzLmZvckVhY2goY2hlY2tib3ggPT4gY2hlY2tib3guY2hlY2tlZCA9IGFsbENoZWNrYm94LmNoZWNrZWQpO1xuICAgICAgICB9KTtcbiAgICAgICAgYWxsQ2hlY2tib3hDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdBbGwnIH0pO1xuXG4gICAgICAgIHRoaXMuYXVkaW9GaWxlcy5mb3JFYWNoKGZpbGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgZmlsZUNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2ZpbGUtY29udGFpbmVyJyk7XG4gICAgICAgICAgICBjb25zdCBjaGVja2JveCA9IGZpbGVDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnY2hlY2tib3gnLCBjbHM6ICdhdWRpby1jaGVja2JveCcgfSk7XG4gICAgICAgICAgICBmaWxlQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiBmaWxlIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1RyYW5zY3JpYmUnIH0pO1xuICAgICAgICBzdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZEZpbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tib3hlcyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuYXVkaW8tY2hlY2tib3gnKSBhcyBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+O1xuICAgICAgICAgICAgY2hlY2tib3hlcy5mb3JFYWNoKChjaGVja2JveCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tib3guY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZEZpbGVzLnB1c2godGhpcy5hdWRpb0ZpbGVzW2luZGV4XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9uU2VsZWN0KHNlbGVjdGVkRmlsZXMpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG5jbGFzcyBBdWRpb1RvVGV4dFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcbiAgICBwcml2YXRlIHBsdWdpbjogQXVkaW9Ub1RleHRQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBBdWRpb1RvVGV4dFBsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBBUEkga2V5JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbnRlciB5b3VyIE9wZW5BSSBBUEkga2V5IGhlcmUuJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBBUEkga2V5JylcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5IHx8ICcnKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ29udGV4dCBtZW51OiBUcmFuc2NyaWJlIHRvIG5ldyBub3RlJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdUcmFuc2NyaWJlIGF1ZGlvIHRvIGEgbmV3IG5vdGUgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBub3RlIHdoZW4geW91IHJpZ2h0LWNsaWNrIGFuIGF1ZGlvIGZpbGUgbGluayBhbmQgY2hvb3NlIHRyYW5zY3JpYmUuJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50cmFuc2NyaWJlVG9OZXdOb3RlKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudHJhbnNjcmliZVRvTmV3Tm90ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdWRpb1RvVGV4dFBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IEF1ZGlvVG9UZXh0U2V0dGluZ3M7XG5cbiAgICBhc3luYyBvbmxvYWQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQXVkaW9Ub1RleHRTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAndHJhbnNjcmliZS1hdWRpby1maWxlcycsXG4gICAgICAgICAgICBuYW1lOiAnQWRkIHRyYW5zY3JpcHRpb24gdG8gbmV3IG5vdGVzJyxcbiAgICAgICAgICAgIGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjaGVja2luZykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gISF0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlTGVhZjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVUcmFuc2NyaWJlQXVkaW9GaWxlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdhZGQtdHJhbnNjcmlwdGlvbi10by1hY3RpdmUtbm90ZScsXG4gICAgICAgICAgICBuYW1lOiAnQWRkIHRyYW5zY3JpcHRpb24gdG8gYWN0aXZlIG5vdGUnLFxuICAgICAgICAgICAgY2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNraW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhIXRoaXMuYXBwLndvcmtzcGFjZS5hY3RpdmVMZWFmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUFkZFRyYW5zY3JpcHRpb25Ub0FjdGl2ZU5vdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1tZW51JywgKG1lbnUsIGZpbGUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU3VwcG9ydGVkQXVkaW9GaWxlKGZpbGUuZXh0ZW5zaW9uKSkge1xuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbShpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnVHJhbnNjcmliZSBhdWRpbyBmaWxlJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdtaWNyb3Bob25lJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50cmFuc2NyaWJlVG9OZXdOb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNjcmliZUF1ZGlvRmlsZShmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFRyYW5zY3JpcHRpb25Ub0FjdGl2ZU5vdGVGcm9tRmlsZShmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIGFzeW5jIGhhbmRsZVRyYW5zY3JpYmVBdWRpb0ZpbGVzKCkge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZSBmb3VuZCEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgIGNvbnN0IGF1ZGlvRmlsZUxpbmtzID0gdGhpcy5leHRyYWN0QXVkaW9GaWxlTGlua3MoZmlsZUNvbnRlbnQpO1xuICAgICAgICBpZiAoYXVkaW9GaWxlTGlua3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhdWRpbyBsaW5rcyBmb3VuZCBpbiB0aGUgbm90ZSEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXVkaW9GaWxlTGlua3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLnRyYW5zY3JpYmVTaW5nbGVBdWRpb0ZpbGUoYXVkaW9GaWxlTGlua3NbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IEF1ZGlvRmlsZVNlbGVjdGlvbk1vZGFsKHsgYXBwOiB0aGlzLmFwcCwgYXVkaW9GaWxlczogYXVkaW9GaWxlTGlua3MsIG9uU2VsZWN0OiBzZWxlY3RlZEZpbGVzID0+IHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZpbGVzLmZvckVhY2gobGluayA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNjcmliZVNpbmdsZUF1ZGlvRmlsZShsaW5rKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH19KS5vcGVuKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBoYW5kbGVBZGRUcmFuc2NyaXB0aW9uVG9BY3RpdmVOb3RlKCkge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZSBmb3VuZCEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgIGNvbnN0IGF1ZGlvRmlsZUxpbmtzID0gdGhpcy5leHRyYWN0QXVkaW9GaWxlTGlua3MoZmlsZUNvbnRlbnQpO1xuICAgICAgICBpZiAoYXVkaW9GaWxlTGlua3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhdWRpbyBsaW5rcyBmb3VuZCBpbiB0aGUgbm90ZSEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYXVkaW9GaWxlTGlua3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICB0aGlzLmFkZFNpbmdsZVRyYW5zY3JpcHRpb25Ub0FjdGl2ZU5vdGUoYXVkaW9GaWxlTGlua3NbMF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbmV3IEF1ZGlvRmlsZVNlbGVjdGlvbk1vZGFsKHtcbiAgICAgICAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgIGF1ZGlvRmlsZXM6IGF1ZGlvRmlsZUxpbmtzLFxuICAgICAgICAgICAgICAgIG9uU2VsZWN0OiBhc3luYyAoc2VsZWN0ZWRGaWxlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdXBkYXRlZENvbnRlbnQgPSBmaWxlQ29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5rIG9mIHNlbGVjdGVkRmlsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCB0aGlzLnRyYW5zY3JpYmVTaW5nbGVBdWRpb0ZpbGUobGluaywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRDb250ZW50ICs9IGBcXG5cXG4jIyMgVHJhbnNjcmlwdGlvbiBmb3IgJHtsaW5rfVxcbiR7dGV4dH1gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCB1cGRhdGVkQ29udGVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkub3BlbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgdHJhbnNjcmliZVNpbmdsZUF1ZGlvRmlsZShsaW5rOiBzdHJpbmcsIHJldHVyblRleHQgPSBmYWxzZSk6IFByb21pc2U8c3RyaW5nIHwgdm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGF1ZGlvRmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChsaW5rKTtcbiAgICAgICAgICAgIGlmICghYXVkaW9GaWxlKSB7XG4gICAgICAgICAgICAgICAgYXVkaW9GaWxlID0gYXdhaXQgdGhpcy5zZWFyY2hGaWxlQnlOYW1lKGxpbmspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFhdWRpb0ZpbGUpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBBdWRpbyBmaWxlIG5vdCBmb3VuZDogJHtsaW5rfWApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGF1ZGlvQnVmZmVyID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZEJpbmFyeShhdWRpb0ZpbGUpO1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHRoaXMudHJhbnNjcmliZUF1ZGlvKGF1ZGlvQnVmZmVyLCBhdWRpb0ZpbGUubmFtZSk7XG4gICAgICAgICAgICBpZiAodGV4dCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXR1cm5UZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXh0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlVHJhbnNjcmlwdGlvbk5vdGVXaXRoVW5pcXVlTmFtZSh0ZXh0LCBhdWRpb0ZpbGUubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRyYW5zY3JpcHRpb24gY29tcGxldGUgZm9yIGZpbGU6ICR7bGlua31gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYFRyYW5zY3JpcHRpb24gZmFpbGVkIGZvciBmaWxlOiAke2xpbmt9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdHJhbnNjcmlwdGlvbiBmb3IgZmlsZTogJHtsaW5rfWApO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZHVyaW5nIHRyYW5zY3JpcHRpb24gZm9yIGZpbGU6ICR7bGlua31gLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBhZGRTaW5nbGVUcmFuc2NyaXB0aW9uVG9BY3RpdmVOb3RlKGxpbms6IHN0cmluZykge1xuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgaWYgKCFhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgZmlsZSBmb3VuZCEnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCB0aGlzLnRyYW5zY3JpYmVTaW5nbGVBdWRpb0ZpbGUobGluaywgdHJ1ZSk7XG4gICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGZpbGVDb250ZW50ICsgYFxcblxcbiMjIyBUcmFuc2NyaXB0aW9uIGZvciAke2xpbmt9XFxuJHt0ZXh0fWA7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVHJhbnNjcmlwdGlvbiBhZGRlZCB0byBhY3RpdmUgbm90ZSBmb3IgZmlsZTogJHtsaW5rfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgYWRkVHJhbnNjcmlwdGlvblRvQWN0aXZlTm90ZUZyb21GaWxlKGF1ZGlvRmlsZTogVEZpbGUpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghYWN0aXZlRmlsZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIGZpbGUgZm91bmQhJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgdGhpcy50cmFuc2NyaWJlU2luZ2xlQXVkaW9GaWxlKGF1ZGlvRmlsZS5wYXRoLCB0cnVlKTtcbiAgICAgICAgaWYgKHRleHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRDb250ZW50ID0gZmlsZUNvbnRlbnQgKyBgXFxuXFxuIyMjIFRyYW5zY3JpcHRpb24gZm9yICR7YXVkaW9GaWxlLm5hbWV9XFxuJHt0ZXh0fWA7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoYWN0aXZlRmlsZSwgdXBkYXRlZENvbnRlbnQpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgVHJhbnNjcmlwdGlvbiBhZGRlZCB0byBhY3RpdmUgbm90ZSBmb3IgZmlsZTogJHthdWRpb0ZpbGUubmFtZX1gKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHRyYW5zY3JpYmVBdWRpb0ZpbGUoYXVkaW9GaWxlOiBURmlsZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgYXVkaW9CdWZmZXIgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkQmluYXJ5KGF1ZGlvRmlsZSk7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgdGhpcy50cmFuc2NyaWJlQXVkaW8oYXVkaW9CdWZmZXIsIGF1ZGlvRmlsZS5uYW1lKTtcbiAgICAgICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVUcmFuc2NyaXB0aW9uTm90ZVdpdGhVbmlxdWVOYW1lKHRleHQsIGF1ZGlvRmlsZS5uYW1lKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdUcmFuc2NyaXB0aW9uIGNvbXBsZXRlIScpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdUcmFuc2NyaXB0aW9uIGZhaWxlZCEnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0FuIGVycm9yIG9jY3VycmVkIGR1cmluZyB0cmFuc2NyaXB0aW9uLicpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZHVyaW5nIHRyYW5zY3JpcHRpb246JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXh0cmFjdEF1ZGlvRmlsZUxpbmtzKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgcmVnZXggPSAvIVxcW1xcWyhbXlxcXV0rXFwuKG1wM3x3ZWJtfHdhdnxvZ2d8bTRhKSlcXF1cXF0vZztcbiAgICAgICAgY29uc3QgbWF0Y2hlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgbGV0IG1hdGNoOiBSZWdFeHBFeGVjQXJyYXkgfCBudWxsO1xuICAgICAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgIG1hdGNoZXMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGNoZXM7XG4gICAgfVxuXG4gICAgYXN5bmMgc2VhcmNoRmlsZUJ5TmFtZShmaWxlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxURmlsZSB8IHVuZGVmaW5lZD4ge1xuICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XG4gICAgICAgIHJldHVybiBmaWxlcy5maW5kKGZpbGUgPT4gZmlsZS5wYXRoLmVuZHNXaXRoKGZpbGVOYW1lKSk7XG4gICAgfVxuXG4gICAgaXNTdXBwb3J0ZWRBdWRpb0ZpbGUoZXh0ZW5zaW9uOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3Qgc3VwcG9ydGVkRXh0ZW5zaW9ucyA9IFsnbXAzJywgJ3dlYm0nLCAnd2F2JywgJ29nZycsICdtNGEnXTtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRlZEV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkpO1xuICAgIH1cblxuICAgIGFzeW5jIHRyYW5zY3JpYmVBdWRpbyhhdWRpb0J1ZmZlcjogQXJyYXlCdWZmZXIsIGZpbGVOYW1lOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBjb25zdCBhcGlLZXkgPSB0aGlzLnNldHRpbmdzLmFwaUtleTtcbiAgICAgICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ09wZW5BSSBBUEkga2V5IG5vdCBzZXQhJyk7XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCBuZXcgQmxvYihbYXVkaW9CdWZmZXJdKSwgZmlsZU5hbWUpO1xuICAgICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdtb2RlbCcsICd3aGlzcGVyLTEnKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEvYXVkaW8vdHJhbnNjcmlwdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthcGlLZXl9YFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogZm9ybURhdGFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdBUEkgcmVxdWVzdCBmYWlsZWQhJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50ZXh0O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGNvbW11bmljYXRlIHdpdGggQVBJLicpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNvbW11bmljYXRlIHdpdGggQVBJOicsIGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGNyZWF0ZVRyYW5zY3JpcHRpb25Ob3RlV2l0aFVuaXF1ZU5hbWUodGV4dDogc3RyaW5nLCBhdWRpb0ZpbGVOYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghYWN0aXZlRmlsZSkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgbGV0IGZpbGVOYW1lID0gYCR7YXVkaW9GaWxlTmFtZX0gVHJhbnNjcmlwdGlvbmA7XG4gICAgICAgIGxldCBmaWxlUGF0aCA9IG5vcm1hbGl6ZVBhdGgoYCR7YWN0aXZlRmlsZS5wYXJlbnQucGF0aH0vJHtmaWxlTmFtZX0ubWRgKTtcbiAgICAgICAgd2hpbGUgKGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGZpbGVQYXRoKSkge1xuICAgICAgICAgICAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1s6Ll0vZywgJy0nKTtcbiAgICAgICAgICAgIGZpbGVOYW1lID0gYCR7YXVkaW9GaWxlTmFtZX0gVHJhbnNjcmlwdGlvbiAke3RpbWVzdGFtcH1gO1xuICAgICAgICAgICAgZmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAke2FjdGl2ZUZpbGUucGFyZW50LnBhdGh9LyR7ZmlsZU5hbWV9Lm1kYCk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBgIyMjIFRyYW5zY3JpcHRpb24gZm9yICR7YXVkaW9GaWxlTmFtZX1cXG4ke3RleHR9YDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoKS5vcGVuRmlsZShmaWxlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIG9wZW4gdHJhbnNjcmlwdGlvbiBub3RlOicsIGZpbGVQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBjcmVhdGUgdHJhbnNjcmlwdGlvbiBub3RlLicpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgdHJhbnNjcmlwdGlvbiBub3RlOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oeyBhcGlLZXk6ICcnLCB0cmFuc2NyaWJlVG9OZXdOb3RlOiB0cnVlIH0sIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cbiAgICBcbiAgICBvbnVubG9hZCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ1VubG9hZGluZyBB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LFlBQUksdUJBQU8scUJBQXFCO0FBQ2hDLGVBQU87QUFBQSxNQUNYO0FBQ0EsWUFBTSxTQUFTLE1BQU0sU0FBUyxLQUFLO0FBQ25DLGFBQU8sT0FBTztBQUFBLElBQ2xCLFNBQVMsT0FBUDtBQUNFLFVBQUksdUJBQU8saUNBQWlDO0FBQzVDLGNBQVEsTUFBTSxtQ0FBbUMsS0FBSztBQUN0RCxhQUFPO0FBQUEsSUFDWDtBQUFBLEVBQ0o7QUFBQSxFQUVBLE1BQU0sc0NBQXNDLE1BQWMsZUFBdUI7QUFDN0UsVUFBTSxhQUFhLEtBQUssSUFBSSxVQUFVLGNBQWM7QUFDcEQsUUFBSSxDQUFDO0FBQVk7QUFFakIsUUFBSSxXQUFXLEdBQUc7QUFDbEIsUUFBSSxlQUFXLCtCQUFjLEdBQUcsV0FBVyxPQUFPLFFBQVEsYUFBYTtBQUN2RSxXQUFPLE1BQU0sS0FBSyxJQUFJLE1BQU0sUUFBUSxPQUFPLFFBQVEsR0FBRztBQUNsRCxZQUFNLFlBQVksSUFBSSxLQUFLLEVBQUUsWUFBWSxFQUFFLFFBQVEsU0FBUyxHQUFHO0FBQy9ELGlCQUFXLEdBQUcsK0JBQStCO0FBQzdDLHFCQUFXLCtCQUFjLEdBQUcsV0FBVyxPQUFPLFFBQVEsYUFBYTtBQUFBLElBQ3ZFO0FBQ0EsUUFBSTtBQUNBLFlBQU0sVUFBVSx5QkFBeUI7QUFBQSxFQUFrQjtBQUMzRCxZQUFNLEtBQUssSUFBSSxNQUFNLE9BQU8sVUFBVSxPQUFPO0FBQzdDLFlBQU0sT0FBTyxLQUFLLElBQUksTUFBTSxzQkFBc0IsUUFBUTtBQUMxRCxVQUFJLE1BQU07QUFDTixjQUFNLEtBQUssSUFBSSxVQUFVLFFBQVEsRUFBRSxTQUFTLElBQUk7QUFBQSxNQUNwRCxPQUFPO0FBQ0gsZ0JBQVEsTUFBTSxzQ0FBc0MsUUFBUTtBQUFBLE1BQ2hFO0FBQUEsSUFDSixTQUFTLE9BQVA7QUFDRSxVQUFJLHVCQUFPLHNDQUFzQztBQUNqRCxjQUFRLE1BQU0sc0NBQXNDLEtBQUs7QUFBQSxJQUM3RDtBQUFBLEVBQ0o7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNqQixTQUFLLFdBQVcsT0FBTyxPQUFPLEVBQUUsUUFBUSxJQUFJLHFCQUFxQixLQUFLLEdBQUcsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQ2xHO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDakIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDckM7QUFBQSxFQUVBLFdBQVc7QUFDUCxZQUFRLElBQUksZ0NBQWdDO0FBQUEsRUFDaEQ7QUFDSjsiLAogICJuYW1lcyI6IFtdCn0K
